{% extends "experiments/edit_base.html" %}

{% load static %}

{% block edit_title %}
  {% if object %}
    Edit {{ object.name }}
  {% else %}
    New Experiment
  {% endif %}
{% endblock %}

{% block edit_nav %}
  {% include "experiments/edit_nav_inline.html" with step=1 object=object %}
{% endblock %}

{% block edit_form %}
  <form
    class="form-horizontal"
    method="POST"
    enctype='multipart/form-data'
  >
    {% csrf_token %}

    {% include "experiments/field_inline.html" with field=form.owner %}

    {% include "experiments/field_inline.html" with field=form.name %}

    {% include "experiments/field_inline.html" with field=form.short_description %}

    {% include "experiments/field_inline.html" with field=form.proposed_start_date %}

    {% include "experiments/field_inline.html" with field=form.proposed_end_date %}



    <div class="form-group {% if field.errors %}has-error{% endif %} md-mt-20">

      <div class="col-md-3 text-right">
        <label class="control-label" for="{{ form.population_percent.id_for_label }}">{{ form.population_percent.label }}</label>
        <br/>
        <a href="#population-percent-help" data-toggle="collapse" aria-expanded="false" aria-controls="population-percent-help">Help</a>
      </div>

      <div class="col-md-9">
        <div class="row">
          <div class="col-md-3">
            {{ form.population_percent }}
          </div>
          <div class="col-md-2 text-center">
            <h5>% of</h5>
          </div>
          <div class="col-md-3">
            {{ form.firefox_channel }}
          </div>
          <div class="col-md-4">
            {{ form.firefox_version }}
          </div>
        </div>

        {% if form.errors.population_percent %}
          <div class="col-md-12 text-right">
            {% for error in form.errors.population_percent %}
              <label for="{{ form.population_percent.id_for_label }}" class="control-label">{{ error }}</label>
                <span class="glyphicon glyphicon-exclamation-sign"></span>
                {{ error }}
              </label>
            {% endfor %}
          </div>
        {% endif %}

        <div id="population-percent-help" class="collapse help-block">
          {{ form.population_percent.help_text|safe }}
        </div>
      </div>
    </div>

    {% include "experiments/field_inline.html" with field=form.client_matching %}

    <div class="form-group">
      <div class="col-md-12 text-right">
        {{ form.errors }}
        {% if object %}
          <a href="{% url "experiments-detail" slug=object.slug %}" class="btn btn-default">Cancel Editing</a>
        {% endif %}
        <button type="submit" name="action" value="save" class="btn btn-info">Save Draft</button>
        <button type="submit" name="action" value="continue" class="btn btn-info">Save Draft and Continue</button>
      </div>
    </div>
  </form>
{% endblock %}

{% block edit_info %}
  <h4><span class="glyphicon glyphicon-info-sign"></span> Getting Started</h4>
  <p>
    Your experiment will start as a draft.
  </p>
  <p>
    Fill out the information on this page to save your draft.
  </p>
  <p>
    After your draft is created, you can fill out the remaining sections
    now or later.
  </p>
  <p>
    When all of the sections are complete and reviewed, you can
    launch your experiment to Shield.
  </p>
{% endblock %}
