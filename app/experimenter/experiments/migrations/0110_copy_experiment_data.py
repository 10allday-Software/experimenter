# Generated by Django 3.0.7 on 2020-09-02 18:14

from django.db import migrations


def copy_experiment_data(apps, schema_editor):
    Experiment = apps.get_model('experiments', 'Experiment')
    ExperimentCore = apps.get_model('experiments', 'ExperimentCore')
    experiment_core_fields = [f.name for f in ExperimentCore._meta.fields if f.name not in ['id', 'experiment_ptr']]

    for experiment in Experiment.objects.all():
        data = {f: getattr(experiment, f) for f in experiment_core_fields}
        ExperimentCore.objects.create(experiment_ptr=experiment, **data)


class Migration(migrations.Migration):

    dependencies = [
        ('experiments', '0109_add_experiment_core'),
    ]

    operations = [
        migrations.RunPython(copy_experiment_data)
    ]
